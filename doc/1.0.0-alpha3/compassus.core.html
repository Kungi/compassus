<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>compassus.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Compassus</span> <span class="project-version">1.0.0-alpha3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compassus</span></div></div></li><li class="depth-2 branch current"><a href="compassus.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="compassus.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="compassus.core.html#var-application"><div class="inner"><span>application</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-application.3F"><div class="inner"><span>application?</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-compassus-merge"><div class="inner"><span>compassus-merge</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-current-route"><div class="inner"><span>current-route</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-did-mount"><div class="inner"><span>did-mount</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-get-reconciler"><div class="inner"><span>get-reconciler</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-mount.21"><div class="inner"><span>mount!</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-parser"><div class="inner"><span>parser</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-root-class"><div class="inner"><span>root-class</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-set-route.21"><div class="inner"><span>set-route!</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-will-mount"><div class="inner"><span>will-mount</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-will-unmount"><div class="inner"><span>will-unmount</span></div></a></li><li class="depth-1"><a href="compassus.core.html#var-wrap-render"><div class="inner"><span>wrap-render</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">compassus.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-application"><h3>application</h3><div class="usage"><code>(application {:keys [routes index-route mixins reconciler], :as opts})</code></div><div class="doc"><pre class="plaintext">Construct a Compassus application from a configuration map.

Required parameters:

  :routes          - a map of route handler (keyword or ident) to the Om Next
                     component that knows how to present that route. The
                     `:index-route` key in the application's configuration
                     must be used to define the application's starting route.

                     Example: {:index Index
                               :about About}

  :index-route     - a keyword or ident denoting the initial application route.
                     Its value must be a key in the `:routes` map.

  :reconciler      - an Om Next reconciler. Note the parser must be constructed
                     with `compassus.core/parser`.

Optional parameters:

  :mixins          - a vector of mixins that hook into the generated Compassus
                     root component's functionality in order to extend its
                     capabilities or change its behavior. The currently built-in
                     mixin constructors are:

                       - `compassus.core/wrap-render`
                       - `compassus.core/will-mount`
                       - `compassus.core/did-mount`
                       - `compassus.core/will-unmount`

                       Refer to the specific documentation of those functions
                       for more information.
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L354">view source</a></div></div><div class="public anchor" id="var-application.3F"><h3>application?</h3><div class="usage"><code>(application? x)</code></div><div class="doc"><pre class="plaintext">Returns true if x is a Compassus application
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L87">view source</a></div></div><div class="public anchor" id="var-compassus-merge"><h3>compassus-merge</h3><div class="usage"><code>(compassus-merge reconciler state res query)</code></div><div class="doc"><pre class="plaintext">Helper function to replace `om.next/default-merge`. Unwraps the current route
from the remote response and merges that into the state instead.</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L283">view source</a></div></div><div class="public anchor" id="var-current-route"><h3>current-route</h3><div class="usage"><code>(current-route x)</code></div><div class="doc"><pre class="plaintext">Returns the current application route. x might be the application,
the reconciler or a component instance.</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L101">view source</a></div></div><div class="public anchor" id="var-did-mount"><h3>did-mount</h3><div class="usage"><code>(did-mount f)</code></div><div class="doc"><pre class="plaintext">Constructs a mixin that will hook into the `componentDidMount` lifecycle
method of the generated root component. Takes a function which will receive
the component as argument. Useful to perform any setup after the Compassus
application mounts.

Example: (compassus.core/did-mount
           (fn [self]
             (start-analytics!)))
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L439">view source</a></div></div><div class="public anchor" id="var-get-reconciler"><h3>get-reconciler</h3><div class="usage"><code>(get-reconciler app)</code></div><div class="doc"><pre class="plaintext">Returns the Om Next reconciler for the given Compassus application.
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L11">view source</a></div></div><div class="public anchor" id="var-mount.21"><h3>mount!</h3><div class="usage"><code>(mount! app target)</code></div><div class="doc"><pre class="plaintext">Given a Compassus application and a target root DOM node, mount the
application. Analogous to `om.next/add-root!`.</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L92">view source</a></div></div><div class="public anchor" id="var-parser"><h3>parser</h3><div class="usage"><code>(parser {:keys [route-dispatch], :or {route-dispatch true}, :as opts})</code></div><div class="doc"><pre class="plaintext">Create a Om Next parser from a configuration map. Possible options include:

:read           - the read function passed to the Om Next parser.
:mutate         - the mutate function passed to the Om Next parser.
:route-dispatch - boolean indicating whether the parser should dispatch on
                  the current route. If set to `false`, dispatches on all the
                  keys in the query of the component pertaining to the current
                  route. Defaults to `true`.
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L258">view source</a></div></div><div class="public anchor" id="var-root-class"><h3>root-class</h3><div class="usage"><code>(root-class app)</code></div><div class="doc"><pre class="plaintext">Returns the application's root class.
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L16">view source</a></div></div><div class="public anchor" id="var-set-route.21"><h3>set-route!</h3><div class="usage"><code>(set-route! x next-route)</code><code>(set-route! x next-route {:keys [queue? params tx], :or {queue? true}})</code></div><div class="doc"><pre class="plaintext">Given a reconciler, Compassus application or component, update the application's
route. `next-route` may be a keyword or an ident. Takes an optional third
options argument, a map with the following supported options:

  :queue? - boolean indicating if the application root should be queued for
            re-render. Defaults to true.

  :params - map of parameters that will be merged into the application state.

  :tx     - transaction(s) (e.g.: `'(do/it!)` or `'[(do/this!) (do/that!)]`)
            that will be run after the mutation that changes the route. Can be
            used to perform additional setup for a given route (such as setting
            the route's parameters).
  </pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L112">view source</a></div></div><div class="public anchor" id="var-will-mount"><h3>will-mount</h3><div class="usage"><code>(will-mount f)</code></div><div class="doc"><pre class="plaintext">Constructs a mixin that will hook into the `componentWillMount` lifecycle
method of the generated root component. Takes a function which will receive
the component as argument. Useful to perform any setup before the Compassus
application mounts.

Example: (compassus.core/will-mount
           (fn [self]
             ;; sets a property in the state of the root component
             (om/set-state! self {:foo 42})))
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L425">view source</a></div></div><div class="public anchor" id="var-will-unmount"><h3>will-unmount</h3><div class="usage"><code>(will-unmount f)</code></div><div class="doc"><pre class="plaintext">Constructs a mixin that will hook into the `componentWillUnmount` lifecycle
method of the generated root component. Takes a function which will receive
the component as argument. Useful to perform any cleanup after the Compassus
application unmounts.

Example: (compassus.core/will-unmount
           (fn [self]
             (stop-analytics!)))
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L452">view source</a></div></div><div class="public anchor" id="var-wrap-render"><h3>wrap-render</h3><div class="usage"><code>(wrap-render wrapper)</code></div><div class="doc"><pre class="plaintext">Constructs a mixin that will wrap all the routes in the application. Useful
for applications that have a common layout for every route.

Takes a function or an Om Next component factory, which will be passed a map
with the following keys (props in the case of a component factory):

  :owner   - the parent component instance

  :factory - the component factory for the current route

  :props   - the props for the current route.

Example: (compassus.core/wrap-render
           (fn [{:keys [owner factory props]}]
             (dom/div nil
               (dom/h1 nil "App title")
               (factory props))))
</pre></div><div class="src-link"><a href="https://github.com/compassus/compassus/tree/1.0.0-alpha3/src/main/compassus/core.cljc#L403">view source</a></div></div></div></body></html>